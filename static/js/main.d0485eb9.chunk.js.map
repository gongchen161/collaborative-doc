{"version":3,"sources":["Firebase.js","AuthContext.js","components/NavBar.js","components/Document.js","components/Signup.js","App.js","index.js"],"names":["firebase","apps","length","console","log","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","e","auth","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","user","setUser","openSnackbar","setOpenSnackbar","value","message","setMessage","useEffect","onAuthStateChanged","u","Provider","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","NavBar","classes","AppBar","position","Snackbar","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","Toolbar","IconButton","edge","className","color","Typography","variant","Button","Document","sessionId","quill","useRef","text","docId","useParams","database","ref","on","data","childData","val","current","getEditor","updateContents","delta","TextField","id","placeholder","fullWidth","margin","InputLabelProps","shrink","onKeyPress","ev","key","InputProps","startAdornment","InputAdornment","onChange","content","source","editor","push","paper","marginTop","display","flexDirection","alignItems","icon","backgroundColor","palette","primary","dark","form","width","submit","SignUp","emailRef","passwordRef","password2Ref","signUp","a","preventDefault","createUserWithEmailAndPassword","Container","component","maxWidth","CssBaseline","Avatar","noValidate","Grid","container","item","xs","required","label","name","autoComplete","inputRef","type","onClick","justifyContent","Link","href","App","uuid","exact","path","to","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d0485eb9.chunk.js","sourcesContent":["\nimport firebase from 'firebase';\n\nexport const firebaseConfig = {\n    apiKey: process.env.REACT_APP_API_KEY,\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n    projectId: process.env.REACT_APP_PROJECT_ID,\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n    messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n    appId: process.env.REACT_APP_APP_ID\n};\n\ntry {\n    if(!firebase.apps.length) {\n        console.log(\"initializing firebase\");\n        firebase.initializeApp(firebaseConfig)\n    } \n} catch (e) {\n    console.log(\"error initializing firebase\", e);\n}\nexport default firebase;\nexport const auth = firebase.auth();","\n\nimport React, { useState, useEffect, useRef, useContext } from 'react'\n\nimport { auth } from './Firebase';\n\nconst AuthContext = React.createContext();\n\nexport function useAuth(){\n     return useContext(AuthContext);\n}\n\nexport function AuthProvider({ children }) {\n    const [user, setUser] = useState();\n    const [openSnackbar, setOpenSnackbar] = useState(false)\n    const [message, setMessage] = useState(\"\");\n    const value = {\n        user,\n        openSnackbar,\n        setOpenSnackbar,\n        message,\n        setMessage\n    }\n\n    useEffect(() => {\n        const cleanup = auth.onAuthStateChanged( (u) => {\n            setUser(u);\n        })\n        return cleanup;\n    }, [])\n  \n\n    return (\n        <AuthContext.Provider value={value}>\n            {children}\n        </AuthContext.Provider>\n\n    )\n\n}","import Recat, { useState, useEffect, useRef } from 'react'\nimport { useParams } from \"react-router-dom\";\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport '../styles.css'\nimport firebase from '../Firebase';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Button from '@material-ui/core/Button';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TitleIcon from '@material-ui/icons/Title';\nimport Snackbar from '@material-ui/core/Snackbar';\n\nimport { useAuth } from '../AuthContext';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      flexGrow: 1,\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    title: {\n      flexGrow: 1,\n    },\n  }));\n\nexport default function NavBar() {\n\n    const classes = useStyles();\n\n    const { openSnackbar, setOpenSnackbar, message, setMessage } = useAuth()\n\n    return (\n        <AppBar position=\"static\">\n        <Snackbar\n            anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n             open={openSnackbar}\n            // onClose={handleClose}\n            message={message}\n            autoHideDuration={3000}\n            onClose={() =>{ setOpenSnackbar(false); setMessage(\"\")}}\n          //  key={vertical + horizontal}\n        />\n        <Toolbar>\n            <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\n            <MenuIcon />\n            </IconButton>\n            <Typography variant=\"h6\" className={classes.title}>\n            Collaborative Doc\n            </Typography>\n            <Button color=\"inherit\"> <AccountCircle /></Button>\n        </Toolbar>\n        </AppBar> \n    )\n}\n","import Recat, { useState, useEffect, useRef } from 'react'\nimport { useParams } from \"react-router-dom\";\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport '../styles.css'\nimport firebase from '../Firebase';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Button from '@material-ui/core/Button';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TitleIcon from '@material-ui/icons/Title';\n\nimport NavBar from './NavBar';\n\n\nexport default function Document( { sessionId } ) {\n\n    const quill = useRef();\n    const [text, setText] = useState(\"\");\n\n    const { docId } = useParams();\n\n   \n    // Initialize Firebase\n    useEffect(() => {\n    try {\n        console.log(\"loading changes from firebase\")\n        firebase.database().ref(`/${docId}`).on('child_added', function(data) {\n            var childData = data.val();\n            if (quill && childData.sessionId !== sessionId) {\n                const editor = quill.current.getEditor();\n                editor.updateContents(childData.delta);\n            }\n        })\n    } catch (e) {\n        console.log(\"error loading from firebse\", e)\n    }\n    }, []);\n\n    const uploadChanges = (content, delta, source, editor) => {\n        if (source !== 'user') {\n            return;\n        }\n    \n        firebase.database().ref(`/${docId}`).push({ sessionId: sessionId , delta : delta } );\n    }\n\n    return (\n        <div>\n            <NavBar />\n            <TextField\n                id=\"standard-full-width\"\n                placeholder=\"   Document Title\"\n                fullWidth\n                margin=\"normal\"\n                InputLabelProps={{\n                    shrink: true,\n                }}\n                onKeyPress={(ev) => {\n                    if (ev.key === 'Enter') {\n                        // Do code here\n                       // ev.preventDefault();\n                    }\n                }}\n                InputProps={{\n                    startAdornment: (\n                      <InputAdornment position=\"start\">\n                        <TitleIcon />\n                      </InputAdornment>\n                    ),\n                  }}\n            />\n        \n            <ReactQuill \n                theme=\"snow\"\n                value={text}\n                onChange={uploadChanges}\n                ref={quill}\n            />\n        </div>\n    )\n\n}","\nimport React, { useRef } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\n\nimport NavBar from './NavBar';\n\nimport { auth } from '../Firebase';\n\nimport { useAuth } from '../AuthContext';\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n      marginTop: theme.spacing(8),\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    },\n    icon: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.primary.dark\n    },\n    form: {\n      width: '100%', // Fix IE 11 issue.\n      marginTop: theme.spacing(3),\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2),\n    },\n  }));\n\n  export default function SignUp() {\n    const classes = useStyles();\n  \n    const emailRef = useRef();\n    const passwordRef = useRef();\n    const password2Ref = useRef();\n\n    const { setOpenSnackbar, setMessage } = useAuth()\n\n    const signUp = async (e) => {\n        e.preventDefault();\n        if (passwordRef.current.value !== password2Ref.current.value) {\n            setMessage(\"password does not match\");\n            setOpenSnackbar(true);\n            return;\n        }\n        try {\n            await auth.createUserWithEmailAndPassword(emailRef.current.value, passwordRef.current.value);\n        } catch (e) {\n            console.log(e);\n            setMessage(e.message);\n            setOpenSnackbar(true);\n        }\n    }\n\n    return (\n        <div>\n\n            <NavBar />\n      <Container component=\"main\" maxWidth=\"xs\">\n        <CssBaseline />\n        <div className={classes.paper}>\n          <Avatar className={classes.icon}>\n            <AccountCircleIcon />\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">\n            Sign up\n          </Typography>\n          <form className={classes.form} noValidate>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <TextField\n                  variant=\"outlined\"\n                  required\n                  fullWidth\n                  id=\"email\"\n                  label=\"Email Address\"\n                  name=\"email\"\n                  autoComplete=\"email\"\n                  inputRef={emailRef}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <TextField\n                  variant=\"outlined\"\n                  required\n                  fullWidth\n                  name=\"password\"\n                  label=\"Password\"\n                  type=\"password\"\n                  id=\"password\"\n                  autoComplete=\"current-password\"\n                  inputRef={passwordRef}\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <TextField\n                  variant=\"outlined\"\n                  required\n                  fullWidth\n                  name=\"password2\"\n                  label=\"Confirm Password\"\n                  type=\"password\"\n                  id=\"password2\"\n                  inputRef={password2Ref}\n                />\n              </Grid>\n            </Grid>\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.submit}\n              onClick={ signUp }\n            >\n              Sign Up\n            </Button>\n            <Grid container justifyContent=\"flex-end\">\n              <Grid item>\n                <Link href=\"#\" variant=\"body2\">\n                  Already have an account? Sign in\n                </Link>\n              </Grid>\n            </Grid>\n          </form>\n        </div>\n      </Container>\n\n\n      </div>\n    );\n  }\n  ","\nimport Recat, { useState, useEffect, useRef } from 'react'\nimport Document from \"./components/Document\";\nimport Signup from './components/Signup';\nimport uuid from 'react-uuid'\n\nimport { HashRouter, Switch, Route, Redirect } from \"react-router-dom\" \nimport { AuthProvider } from './AuthContext';\n\nfunction App() {\n  const sessionId = uuid();\n\n\n  return (\n    <AuthProvider>\n    <HashRouter>\n      <Switch>\n        <Route exact path=\"/\">\n          <Redirect to={`/${uuid()}`} />\n        </Route>\n        <Route path=\"/signup\">\n          <Signup \n          />\n        </Route>\n        <Route path=\"/:docId\">\n          <Document \n            sessionId={sessionId}\n          />\n          <div>v1.2</div>\n        </Route>\n      </Switch>\n    </HashRouter>\n\n  </AuthProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}