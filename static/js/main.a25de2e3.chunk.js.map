{"version":3,"sources":["components/TextEditor.js","App.js","index.js"],"names":["TextEditor","sessionId","quill","useRef","useState","text","firebaseConfig","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","useEffect","firebase","initializeApp","database","ref","on","data","childData","val","current","getEditor","updateContents","delta","e","theme","value","onChange","content","source","editor","console","log","getContents","push","App","uuid","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yPAMe,SAASA,EAAT,GAAsC,IAAfC,EAAc,EAAdA,UAE5BC,EAAQC,mBACd,EAAwBC,mBAAS,IAAjC,mBAAOC,EAAP,KAEMC,GAFN,KAEuB,CACnBC,OAAQC,0CACRC,WAAYD,oCACZE,UAAWF,oBACXG,cAAeH,gCACfI,kBAAmBJ,eACnBK,MAAOL,8CAGXM,qBAAU,WACV,IACIC,IAASC,cAAcV,GAoBvBS,IAASE,WAAWC,IAAI,iBAAiBC,GAAG,eAAe,SAASC,GAChE,IAAIC,EAAYD,EAAKE,MACjBpB,GAASmB,EAAUpB,YAAcA,GAClBC,EAAMqB,QAAQC,YACtBC,eAAeJ,EAAUK,UAG1C,MAAOC,OAGN,IAeH,OACI,cAAC,IAAD,CACIC,MAAM,OACNC,MAAOxB,EACPyB,SAjBc,SAACC,EAASL,EAAOM,EAAQC,GAC5B,SAAXD,IAIJE,QAAQC,IAAI,QAASF,EAAOG,eAE5BF,QAAQC,IAAI,gBAEEpB,IAASE,WAAWC,IAAI,iBAChCmB,KAAK,CAAEpC,UAAWA,EAAYyB,MAAQA,MAQxCR,IAAKhB,I,qBC1DFoC,MAVf,WACE,IAAMrC,EAAYsC,MAElB,OACE,cAACvC,EAAD,CACEC,UAAWA,KCLjBuC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.a25de2e3.chunk.js","sourcesContent":["import Recat, { useState, useEffect, useRef } from 'react'\nimport ReactQuill from 'react-quill';\nimport firebase from 'firebase'\nimport 'react-quill/dist/quill.snow.css';\nimport '../styles.css'\n\nexport default function TextEditor( { sessionId } ) {\n\n    const quill = useRef();\n    const [text, setText] = useState(\"\");\n\n    const firebaseConfig = {\n        apiKey: process.env.REACT_APP_API_KEY,\n        authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n        projectId: process.env.REACT_APP_PROJECT_ID,\n        storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n        messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n        appId: process.env.REACT_APP_APP_ID\n    };\n    // Initialize Firebase\n    useEffect(() => {\n    try {\n        firebase.initializeApp(firebaseConfig);\n\n\n        // firebase.database().ref(\"/tesing-node1\").once('value', function(snapshot) {\n        //     snapshot.forEach(function(childSnapshot) {\n        //       var childKey = childSnapshot.key;\n        //       var childData = childSnapshot.val();\n             \n        //       console.log(childKey);\n        //       console.log(childData.ops);\n            \n        //       if (quill && childData.sessionId !== sessionId) {\n        //         const editor = quill.current.getEditor();\n        //         editor.updateContents(childData.delta);\n        //       }\n\n        //     });\n        //   });\n\n\n        firebase.database().ref(\"/tesing-node1\").on('child_added', function(data) {\n            var childData = data.val();\n            if (quill && childData.sessionId !== sessionId) {\n                const editor = quill.current.getEditor();\n                editor.updateContents(childData.delta);\n            }\n        })\n    } catch (e) {\n\n    }\n    }, []);\n\n    const uploadChanges = (content, delta, source, editor) => {\n        if (source !== 'user') {\n            return;\n        }\n\n        console.log('delta', editor.getContents());\n        \n        console.log('send-changes')\n        \n        const dbRef = firebase.database().ref(\"/tesing-node1\");\n        dbRef.push({ sessionId: sessionId , delta : delta } );\n    }\n\n    return (\n        <ReactQuill \n            theme=\"snow\"\n            value={text}\n            onChange={uploadChanges}\n            ref={quill}\n        />\n    )\n\n}","\nimport TextEditor from \"./components/TextEditor\";\nimport uuid from 'react-uuid'\n\nfunction App() {\n  const sessionId = uuid();\n\n  return (\n    <TextEditor \n      sessionId={sessionId}\n    />\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}