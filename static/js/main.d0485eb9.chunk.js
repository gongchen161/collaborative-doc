(this["webpackJsonpcollaborative-doc"]=this["webpackJsonpcollaborative-doc"]||[]).push([[0],{124:function(e,t,a){},259:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),s=a.n(c),i=a(50),o=a(20),l=a(89),d=a.n(l),j=(a(123),a(124),a(60));try{j.a.apps.length||(console.log("initializing firebase"),j.a.initializeApp({apiKey:"AIzaSyAMVQX5KUs7J-GGEKOItKkeLT8J0WS0C6Y",authDomain:"collaborative-doc.firebaseapp.com",projectId:"collaborative-doc",storageBucket:"collaborative-doc.appspot.com",messagingSenderId:"493522432245",appId:"1:493522432245:web:0ab116816f5ba3d74fd5bc"}))}catch(_){console.log("error initializing firebase",_)}var u=j.a,b=j.a.auth(),p=a(312),h=a(307),O=a(91),f=a.n(O),x=a(299),m=a(302),g=a(304),v=a(128),w=a(305),k=a(90),y=a.n(k),S=a(306),I=a(56),C=a.n(I),A=a(314),R=a(8),W=r.a.createContext();function E(){return Object(n.useContext)(W)}function P(e){var t=e.children,a=Object(n.useState)(),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(!1),l=Object(i.a)(o,2),d=l[0],j=l[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),h={user:c,openSnackbar:d,setOpenSnackbar:j,message:p[0],setMessage:p[1]};return Object(n.useEffect)((function(){return b.onAuthStateChanged((function(e){s(e)}))}),[]),Object(R.jsx)(W.Provider,{value:h,children:t})}var D=Object(x.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function N(){var e=D(),t=E(),a=t.openSnackbar,n=t.setOpenSnackbar,r=t.message,c=t.setMessage;return Object(R.jsxs)(m.a,{position:"static",children:[Object(R.jsx)(A.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,message:r,autoHideDuration:3e3,onClose:function(){n(!1),c("")}}),Object(R.jsxs)(g.a,{children:[Object(R.jsx)(w.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(R.jsx)(y.a,{})}),Object(R.jsx)(v.a,{variant:"h6",className:e.title,children:"Collaborative Doc"}),Object(R.jsxs)(S.a,{color:"inherit",children:[" ",Object(R.jsx)(C.a,{})]})]})]})}function z(e){var t=e.sessionId,a=Object(n.useRef)(),r=Object(n.useState)(""),c=Object(i.a)(r,2),s=c[0],l=(c[1],Object(o.g)().docId);Object(n.useEffect)((function(){try{console.log("loading changes from firebase"),u.database().ref("/".concat(l)).on("child_added",(function(e){var n=e.val();a&&n.sessionId!==t&&a.current.getEditor().updateContents(n.delta)}))}catch(_){console.log("error loading from firebse",_)}}),[]);return Object(R.jsxs)("div",{children:[Object(R.jsx)(N,{}),Object(R.jsx)(p.a,{id:"standard-full-width",placeholder:"   Document Title",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},onKeyPress:function(e){e.key},InputProps:{startAdornment:Object(R.jsx)(h.a,{position:"start",children:Object(R.jsx)(f.a,{})})}}),Object(R.jsx)(d.a,{theme:"snow",value:s,onChange:function(e,a,n,r){"user"===n&&u.database().ref("/".concat(l)).push({sessionId:t,delta:a})},ref:a})]})}var K=a(95),M=a.n(K),B=a(126),G=a(315),J=a(309),T=a(311),q=a(310),U=a(308),L=Object(x.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},icon:{margin:e.spacing(1),backgroundColor:e.palette.primary.dark},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function V(){var e=L(),t=Object(n.useRef)(),a=Object(n.useRef)(),r=Object(n.useRef)(),c=E(),s=c.setOpenSnackbar,i=c.setMessage,o=function(){var e=Object(B.a)(M.a.mark((function e(n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a.current.value===r.current.value){e.next=5;break}return i("password does not match"),s(!0),e.abrupt("return");case 5:return e.prev=5,e.next=8,b.createUserWithEmailAndPassword(t.current.value,a.current.value);case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0),i(e.t0.message),s(!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsxs)("div",{children:[Object(R.jsx)(N,{}),Object(R.jsxs)(U.a,{component:"main",maxWidth:"xs",children:[Object(R.jsx)(J.a,{}),Object(R.jsxs)("div",{className:e.paper,children:[Object(R.jsx)(G.a,{className:e.icon,children:Object(R.jsx)(C.a,{})}),Object(R.jsx)(v.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(R.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(R.jsxs)(q.a,{container:!0,spacing:2,children:[Object(R.jsx)(q.a,{item:!0,xs:12,children:Object(R.jsx)(p.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",inputRef:t})}),Object(R.jsx)(q.a,{item:!0,xs:12,children:Object(R.jsx)(p.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:a})}),Object(R.jsx)(q.a,{item:!0,xs:12,children:Object(R.jsx)(p.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password2",label:"Confirm Password",type:"password",id:"password2",inputRef:r})})]}),Object(R.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:o,children:"Sign Up"}),Object(R.jsx)(q.a,{container:!0,justifyContent:"flex-end",children:Object(R.jsx)(q.a,{item:!0,children:Object(R.jsx)(T.a,{href:"#",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})]})}var H=a(96),Q=a.n(H),X=a(73);var Y=function(){var e=Q()();return Object(R.jsx)(P,{children:Object(R.jsx)(X.a,{children:Object(R.jsxs)(o.d,{children:[Object(R.jsx)(o.b,{exact:!0,path:"/",children:Object(R.jsx)(o.a,{to:"/".concat(Q()())})}),Object(R.jsx)(o.b,{path:"/signup",children:Object(R.jsx)(V,{})}),Object(R.jsxs)(o.b,{path:"/:docId",children:[Object(R.jsx)(z,{sessionId:e}),Object(R.jsx)("div",{children:"v1.2"})]})]})})})};s.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(Y,{})}),document.getElementById("root"))}},[[259,1,2]]]);
//# sourceMappingURL=main.d0485eb9.chunk.js.map