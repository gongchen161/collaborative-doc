{"version":3,"sources":["components/TextEditor.js","App.js","index.js"],"names":["TextEditor","sessionId","quill","useRef","useState","text","docId","useParams","firebaseConfig","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","useEffect","firebase","initializeApp","database","ref","on","data","childData","val","current","getEditor","updateContents","delta","e","theme","value","onChange","content","source","editor","push","App","uuid","exact","path","to","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"gQAOe,SAASA,EAAT,GAAsC,IAAfC,EAAc,EAAdA,UAE5BC,EAAQC,mBACd,EAAwBC,mBAAS,IAAjC,mBAAOC,EAAP,KAEQC,GAFR,KAEkBC,cAAVD,OAEFE,EAAiB,CACnBC,OAAQC,0CACRC,WAAYD,oCACZE,UAAWF,oBACXG,cAAeH,gCACfI,kBAAmBJ,eACnBK,MAAOL,6CAGXM,qBAAU,WACV,IACIC,IAASC,cAAcV,GAoBvBS,IAASE,WAAWC,IAApB,WAA4Bd,IAASe,GAAG,eAAe,SAASC,GAC5D,IAAIC,EAAYD,EAAKE,MACjBtB,GAASqB,EAAUtB,YAAcA,GAClBC,EAAMuB,QAAQC,YACtBC,eAAeJ,EAAUK,UAG1C,MAAOC,OAGN,IAcH,OACI,cAAC,IAAD,CACIC,MAAM,OACNC,MAAO1B,EACP2B,SAhBc,SAACC,EAASL,EAAOM,EAAQC,GAC5B,SAAXD,GAQJjB,IAASE,WAAWC,IAApB,WAA4Bd,IAAS8B,KAAK,CAAEnC,UAAWA,EAAY2B,MAAQA,KAQvER,IAAKlB,I,6BChDFmC,MApBf,WACE,IAAMpC,EAAYqC,MAElB,OACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAlB,SACE,cAAC,IAAD,CAAUC,GAAE,WAAMH,WAEpB,eAAC,IAAD,CAAOE,KAAK,UAAZ,UACE,cAACxC,EAAD,CACEC,UAAWA,IAEb,gDCfVyC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.f35ba611.chunk.js","sourcesContent":["import Recat, { useState, useEffect, useRef } from 'react'\nimport { useParams } from \"react-router-dom\";\nimport ReactQuill from 'react-quill';\nimport firebase from 'firebase'\nimport 'react-quill/dist/quill.snow.css';\nimport '../styles.css'\n\nexport default function TextEditor( { sessionId } ) {\n\n    const quill = useRef();\n    const [text, setText] = useState(\"\");\n\n    const { docId } = useParams();\n\n    const firebaseConfig = {\n        apiKey: process.env.REACT_APP_API_KEY,\n        authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n        projectId: process.env.REACT_APP_PROJECT_ID,\n        storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n        messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n        appId: process.env.REACT_APP_APP_ID\n    };\n    // Initialize Firebase\n    useEffect(() => {\n    try {\n        firebase.initializeApp(firebaseConfig);\n\n\n        // firebase.database().ref(\"/tesing-node1\").once('value', function(snapshot) {\n        //     snapshot.forEach(function(childSnapshot) {\n        //       var childKey = childSnapshot.key;\n        //       var childData = childSnapshot.val();\n             \n        //       console.log(childKey);\n        //       console.log(childData.ops);\n            \n        //       if (quill && childData.sessionId !== sessionId) {\n        //         const editor = quill.current.getEditor();\n        //         editor.updateContents(childData.delta);\n        //       }\n\n        //     });\n        //   });\n\n\n        firebase.database().ref(`/${docId}`).on('child_added', function(data) {\n            var childData = data.val();\n            if (quill && childData.sessionId !== sessionId) {\n                const editor = quill.current.getEditor();\n                editor.updateContents(childData.delta);\n            }\n        })\n    } catch (e) {\n\n    }\n    }, []);\n\n    const uploadChanges = (content, delta, source, editor) => {\n        if (source !== 'user') {\n            return;\n        }\n\n        // console.log('delta', editor.getContents());\n        \n        // console.log('send-changes');\n    \n        firebase.database().ref(`/${docId}`).push({ sessionId: sessionId , delta : delta } );\n    }\n\n    return (\n        <ReactQuill \n            theme=\"snow\"\n            value={text}\n            onChange={uploadChanges}\n            ref={quill}\n        />\n    )\n\n}","\nimport TextEditor from \"./components/TextEditor\";\nimport uuid from 'react-uuid'\n\nimport { HashRouter, Switch, Route, Redirect } from \"react-router-dom\"\n\nfunction App() {\n  const sessionId = uuid();\n\n  return (\n    <HashRouter>\n      <Switch>\n        <Route exact path=\"/\">\n          <Redirect to={`/${uuid()}`} />\n        </Route>\n        <Route path=\"/:docId\">\n          <TextEditor \n            sessionId={sessionId}\n          />\n          <div>v1.2</div>\n        </Route>\n      </Switch>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}