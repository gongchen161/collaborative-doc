(this["webpackJsonpcollaborative-doc"]=this["webpackJsonpcollaborative-doc"]||[]).push([[0],{133:function(e,t,a){},278:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),s=a.n(r),i=a(39),o=a(20),l=a(99),d=a.n(l),j=(a(132),a(133),a(67));try{j.a.apps.length||(console.log("initializing firebase"),j.a.initializeApp({apiKey:"AIzaSyAMVQX5KUs7J-GGEKOItKkeLT8J0WS0C6Y",authDomain:"collaborative-doc.firebaseapp.com",projectId:"collaborative-doc",storageBucket:"collaborative-doc.appspot.com",messagingSenderId:"493522432245",appId:"1:493522432245:web:0ab116816f5ba3d74fd5bc"}))}catch(ie){console.log("error initializing firebase",ie)}var u=j.a,b=j.a.auth(),p=a(325),h=a(317),O=a(101),x=a.n(O),m=a(310),f=a(312),g=a(314),v=a(139),w=a(315),y=a(100),k=a.n(y),S=a(316),C=a(41),I=a.n(C),R=a(328),A=a(5),W=c.a.createContext();function N(){return Object(n.useContext)(W)}function E(e){var t=e.children,a=Object(n.useState)(),c=Object(i.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(!1),l=Object(i.a)(o,2),d=l[0],j=l[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),h={user:r,openSnackbar:d,setOpenSnackbar:j,message:p[0],setMessage:p[1]};return Object(n.useEffect)((function(){return b.onAuthStateChanged((function(e){s(e)}))}),[]),Object(A.jsx)(W.Provider,{value:h,children:t})}var D=Object(m.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function P(){var e=D(),t=N(),a=t.openSnackbar,n=t.setOpenSnackbar,c=t.message,r=t.setMessage;return Object(A.jsxs)(f.a,{position:"static",children:[Object(A.jsx)(R.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,message:c,autoHideDuration:3e3,onClose:function(){n(!1),r("")}}),Object(A.jsxs)(g.a,{children:[Object(A.jsx)(w.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(A.jsx)(k.a,{})}),Object(A.jsx)(v.a,{variant:"h6",className:e.title,children:"Collaborative Doc"}),Object(A.jsxs)(S.a,{color:"inherit",children:[" ",Object(A.jsx)(I.a,{})]})]})]})}function T(e){var t=e.sessionId,a=Object(n.useRef)(),c=Object(n.useState)(""),r=Object(i.a)(c,2),s=r[0],l=(r[1],Object(n.useState)("")),j=Object(i.a)(l,2),b=j[0],O=j[1],m=Object(o.h)().docId,f=Object(n.createRef)(),g=Object(n.useState)(!1),v=Object(i.a)(g,2),w=v[0],y=v[1];Object(n.useEffect)((function(){try{console.log("loading changes from firebase"),u.database().ref("/".concat(m,"-content")).on("child_added",(function(e){var n=e.val();a&&n.sessionId!==t&&a.current.getEditor().updateContents(n.delta)})),u.database().ref("/".concat(m,"-title")).limitToLast(1).on("child_added",(function(e){var a=e.val();a.sessionId!==t&&O(a.title)}))}catch(ie){console.log("error loading from firebse",ie)}}),[]);var k=function(e){u.database().ref("/".concat(m,"-title")).push({sessionId:t,title:e})};return Object(A.jsxs)("div",{children:[Object(A.jsx)(P,{}),Object(A.jsx)(p.a,{id:"standard-full-width",placeholder:"   Document Title",fullWidth:!0,value:b,margin:"normal",InputLabelProps:{shrink:!0},inputRef:f,disabled:w,readOnly:!0,autoFocus:!0,onChange:function(e){O(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(f.current.blur(),y(!0),k(f.current.value))},onClick:function(){y(!1)},onFocus:function(){y(!1),console.log(22)},onBlur:function(){y(!0),console.log(333),k(f.current.value)},InputProps:{startAdornment:Object(A.jsx)(h.a,{position:"start",children:Object(A.jsx)(x.a,{})})}}),Object(A.jsx)(d.a,{theme:"snow",value:s,onChange:function(e,a,n,c){"user"===n&&u.database().ref("/".concat(m,"-content")).push({sessionId:t,delta:a})},ref:a})]})}var z=a(54),M=a.n(z),q=a(88),B=a(329),G=a(319),K=a(321),L=a(320),J=a(318),U=Object(m.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},icon:{margin:e.spacing(1),backgroundColor:e.palette.primary.dark},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function V(){var e=U(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=Object(n.useRef)(),r=N(),s=r.setOpenSnackbar,i=r.setMessage,o=function(){var e=Object(q.a)(M.a.mark((function e(n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a.current.value===c.current.value){e.next=5;break}return i("password does not match"),s(!0),e.abrupt("return");case 5:return e.prev=5,e.next=8,b.createUserWithEmailAndPassword(t.current.value,a.current.value);case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0),i(e.t0.message),s(!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsxs)("div",{children:[Object(A.jsx)(P,{}),Object(A.jsxs)(J.a,{component:"main",maxWidth:"xs",children:[Object(A.jsx)(G.a,{}),Object(A.jsxs)("div",{className:e.paper,children:[Object(A.jsx)(B.a,{className:e.icon,children:Object(A.jsx)(I.a,{})}),Object(A.jsx)(v.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(A.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(A.jsxs)(L.a,{container:!0,spacing:2,children:[Object(A.jsx)(L.a,{item:!0,xs:12,children:Object(A.jsx)(p.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",inputRef:t})}),Object(A.jsx)(L.a,{item:!0,xs:12,children:Object(A.jsx)(p.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:a})}),Object(A.jsx)(L.a,{item:!0,xs:12,children:Object(A.jsx)(p.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password2",label:"Confirm Password",type:"password",id:"password2",inputRef:c})})]}),Object(A.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:o,children:"Sign Up"}),Object(A.jsx)(L.a,{container:!0,justifyContent:"flex-end",children:Object(A.jsx)(L.a,{item:!0,children:Object(A.jsx)(K.a,{href:"#/login",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})]})}var F=Object(m.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},icon:{margin:e.spacing(1),backgroundColor:e.palette.primary.dark},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function _(){var e=F(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=Object(o.g)(),r=N(),s=r.setOpenSnackbar,i=r.setMessage,l=function(){var e=Object(q.a)(M.a.mark((function e(n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,b.signInWithEmailAndPassword(t.current.value,a.current.value);case 4:c.push("/home"),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),i(e.t0.message),s(!0);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsxs)("div",{children:[Object(A.jsx)(P,{}),Object(A.jsxs)(J.a,{component:"main",maxWidth:"xs",children:[Object(A.jsx)(G.a,{}),Object(A.jsxs)("div",{className:e.paper,children:[Object(A.jsx)(B.a,{className:e.icon,children:Object(A.jsx)(I.a,{})}),Object(A.jsx)(v.a,{component:"h1",variant:"h5",children:"Login"}),Object(A.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(A.jsxs)(L.a,{container:!0,spacing:2,children:[Object(A.jsx)(L.a,{item:!0,xs:12,children:Object(A.jsx)(p.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",inputRef:t})}),Object(A.jsx)(L.a,{item:!0,xs:12,children:Object(A.jsx)(p.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:a})})]}),Object(A.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:l,children:"Log In"}),Object(A.jsx)(L.a,{container:!0,justifyContent:"flex-end",children:Object(A.jsx)(L.a,{item:!0,children:Object(A.jsx)(K.a,{href:"#/signup",variant:"body2",children:"Don't have an account? Sign up"})})})]})]})]})]})}var H=a(136),Q=a(326),X=a(135),Y=a.n(X),Z=a(322),$=a(324),ee=a(323),te=Object(m.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"left",verticalAlign:"middle",color:e.palette.text.secondary,fontSize:"30px"}}}));var ae=function(){N().user;var e=te();return Object(A.jsxs)("div",{children:[Object(A.jsx)(P,{}),Object(A.jsx)(Q.a,{m:2,pt:3,children:Object(A.jsx)(L.a,{container:!0,spacing:3,children:Object(H.a)(Array(10)).map((function(t,a){return Object(A.jsx)(L.a,{item:!0,xs:12,children:Object(A.jsx)(Z.a,{className:e.root,children:Object(A.jsx)(ee.a,{children:Object(A.jsxs)($.a,{className:e.paper,children:[" ",Object(A.jsx)(Y.a,{})," Row ",a]})})})})}))})})]})},ne=a(105),ce=a.n(ne),re=a(62);var se=function(){var e=ce()();return Object(A.jsx)(E,{children:Object(A.jsx)(re.a,{children:Object(A.jsxs)(o.d,{children:[Object(A.jsx)(o.b,{exact:!0,path:"/",children:Object(A.jsx)(o.a,{to:"/".concat(ce()())})}),Object(A.jsx)(o.b,{exact:!0,path:"/signup",children:Object(A.jsx)(V,{})}),Object(A.jsx)(o.b,{exact:!0,path:"/login",children:Object(A.jsx)(_,{})}),Object(A.jsx)(o.b,{exact:!0,path:"/home",children:Object(A.jsx)(ae,{})}),Object(A.jsxs)(o.b,{path:"/:docId",children:[Object(A.jsx)(T,{sessionId:e}),Object(A.jsx)("div",{children:"v1.3"})]})]})})})};s.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(se,{})}),document.getElementById("root"))}},[[278,1,2]]]);
//# sourceMappingURL=main.84a65235.chunk.js.map